---
title: "Assignments"
output:
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    number_sections: false
    toc_depth: 1
    #code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message=FALSE,warning=FALSE, cache=TRUE)
```

# Assignment 1

### Problem 1 

Install the datasets package on the console below using `install.packages("datasets")`. Now load the library.

```{r}
#Install data set package

#install.packages("datasets")

#Load the library of datasets 

library(datasets)

```

Load the USArrests dataset and rename it `dat`. Note that this dataset comes with R, in the package datasets, so there's no need to load data from your computer. Why is it useful to rename the dataset?

Answer to problem 1: It is useful to rename the dataset because any time you need to analyze the data in any way, you can use the new name to tell the computer to use that data set for the analysis.Also, if you change the data in any way - such as removing outliers - it has to have a new name, so that if someone wants to edit the original data they will not be confused. It is very important for analysis to be replicable, so renaming the data allows you to do what you need to it without taking away someone's else's ability to do their own analysis to the original dataset.

```{r}
#Load USArrests data set

USArrests

#Rename USArrests dat

dat<-USArrests

#Now USArrests data set is called dat
```
### Problem 2

Use this command to make the state names into a new variable called State. 

```{r, eval=TRUE}
dat$state <- tolower(rownames(USArrests))
```

This dataset has the state names as row names, so we just want to make them into a new variable. We also make them all lower case, because that will help us draw a map later - the map function requires the states to be lower case.


List the variables contained in the dataset `USArrests`.

Answer to problem 2: "Murder" "Assault"  "UrbanPop" "Rape" "state"

```{r}
#finding names of state variables

names(dat)
```
### Problem 3 

What type of variable (from the DVB chapter) is `Murder`? 

Answer: Murder is a quantitative variable. 

What R Type of variable is it?

Answer: In terms of R Types of variables Murder is a numeric variable.


### Problem 4

What information is contained in this dataset, in general? What do the numbers mean? 

Answer: The information contained in the dataset has to do with 4 categories of crimes and their frequency of arrest rates per 100,000 residents in all 50 states. The numbers refer to how many instances of arrests for that category of crime occurred in that state per every 100,000 residents. 
  

### Problem 5

Draw a histogram of `Murder` with proper labels and title.

```{r}
#Make a histogram of murder with proper axis titles (Problem 5)

hist(dat$Murder, xlab = "Number of Murder Arrests", main = "Histogram of Murder Arrests")
```

### Problem 6

Please summarize `Murder` quantitatively. What are its mean and median? What is the difference between mean and median? What is a quartile, and why do you think R gives you the 1st Qu. and 3rd Qu.?

Answer to problem 6: The mean of murder is 7.788, the median of murder is 7.250. While mean and median are both measures of central tendency, they have relevant differences. Mean is an average of all of the numbers in the set. It is found by adding up all the numbers in the set and dividing that sum by the total number of variables in the set.The median is the number in the center when you line up all of the variables in numerical order.This means that half of the data lies below the median and the other half above.A quartile represents the three values in a sample that divide the distribution of the data into even fourths.This means that each quartile contains 25% of the data. I think that R gives you the first and third quartiles because these two measures bookend the interquartile range (IQR = Q3-Q1). The interquartile range represents the middle half of the values,and the size of the IQR reveals how spread out the data is. The higher the IQR, the more spread out the data is and vice versa.  


```{r}
#Summarizing Murder quantitatively (Problem 6)

summary(dat$Murder)
```

### Problem 7

Repeat the same steps you followed for `Murder`, for the variables `Assault` and `Rape`. Now plot all three histograms together. You can do this by using the command `par(mfrow=c(3,1))` and then plotting each of the three. 

```{r, echo = TRUE, fig.width = 5, fig.height = 8}
#Make a histogram of Assault with the proper axis titles (Problem 7)

hist(dat$Assault , xlab = "Number of Assaults Arrests" , main = "Histogram of Assault Arrests")

#Make a histogram of Rape with proper axis titles (Problem 7)

hist(dat$Rape , xlab = "Number of Rape Arrests" , main = "Histogram of Rape Arrests")

#Make a plot of all 3 histograms (Murder, Assault, and Rape) together (Problem 7)

par(mfrow=c(3,1)) 
hist(dat$Murder, xlab = "Number of Murder Arrests", main = "Histogram of Murder Arrests")
hist(dat$Assault , xlab = "Number of Assault Arrests" , main = "Histogram of Assault Arrests")
hist(dat$Rape , xlab = "Number of Rape Arrests" , main = "Histogram of Rape Arrests")
```

What does the command par do, in your own words (you can look this up by asking R `?par`)?

Answer: The command par is a way in which multiple plots can be viewed together.It essentially set the parameters for viewing graphs. For example, in this problem I wanted to display 3 graphs each with their own variables.The graphs all have the same y-axis (frequency) and all the x-axes are "number of." This command allows the histograms to be viewed simultaneously and thus the data to be easily analyzed and compared.


What can you learn from plotting the histograms together?

Answer: By plotting the histograms together, you can learn about differences and similarities in the arrest rates for these 3 different categories.
  
### Problem 8

In the console below (not in text), type `install.packages("maps")` and press Enter, and then type `install.packages("ggplot2")` and press Enter. This will install the packages so you can load the libraries.

Run this code:

```{r, eval = FALSE, fig.width = 7.5, fig.height = 4}
library('maps') 
library('ggplot2') 

ggplot(dat, aes(map_id=state, fill=Murder)) + 
  geom_map(map=map_data("state")) + 
  expand_limits(x=map_data("state")$long, y=map_data("state")$lat)
```

What does this code do? Explain what each line is doing.

Answer: The first two lines specify which library to find the right packages in in order to achieve the commands of the code below. The third line specifies Murder as the specific variable for the plot. The fourth line makes a map of the states filled with the state data. The fifth line designates the axes of the map and sets the plot limits, which determines the dimensions of the map.








# Assignment 2

### Problem 1 

```{r}
# Load data

# Read the data

dat <- read.csv(file = "data/Assignment 2 data copy.csv")

# What are the dimensions of the dataset? 

dim(dat)
``` 

### Problem 2 

```{r}
## Variables

# Describe the variables in the dataset.

names(dat)

```

"mjage"= age at which respondent first used marijuana or hashish
"cigage"= age at which respondent first started smoking cigarettes every day 
"iralcage"= age at which respondent first tried alcohol
"age2"= final edited ages since respondents could change their answer in the course of the survey
"sexatract"= sexual attraction 
"speakengl"= how well respondent speaks english
"irsex"= gender (male or female)

Answer:"mjage," "cigage," and "iralcage" are all quantitative numeric variables because they contain numerical values with measurement units and do not simply assign respondents to a group.They can also be evaluated for measures of central tendency such as mean, median, and mode."age2,""sexatract," "speakengl,"and "irsex" are all categorical variables because they assign respondents to groups and cannot be quantitatively evaluated. 


What is this data set about? Who collected the data, what kind of sample is it, and what was the purpose of generating the data?
This data set is about drug use and health in the US and is aptly named, The National Survey on Drug Use and Health. More specifically,it tracked trends in substance use and mental illness. It is a representative sample of the general US civilian population aged 12 and up that was collected by the Substance Abuse and Mental Health Services Administration branch of the US Department of Health and Human Services. The purpose of generating the data was to provide information that would aid in prevention and treatment and estimate its need, monitor trends in substance use/abuse, and inform public policy regarding health.

### Problem 3
```{r}
## Age and gender

# What is the age distribution of the sample like? Make sure you read the code book to know what the variable values mean.
#Make a histogram of age. 

hist(dat$age2 , main = "histogram of final age categories",  xlab= "age category")
```

Answer: The ages are weighted more toward the older age categories. Most of the respondents fell into the older age range of the data,between groups 12 and 16 and thus the ages 24-64. The majority of the data, and thus the ages lies in those two bins.

Do you think this age distribution representative of the US population? Why or why not?

Answer: I think this age distribution is representative of the US population because census data was used in conducting the survey.
All 50 states plus DC were included and surveyors were sent to many houses that were randomly sampled and selected 2 members (12 or older) of the household to respond. This may be where there could be an issue with representation if younger members of the families or households were disproportionately selected.Another issue could be that they did not survey nursing homes or other institutional group quarters, which might skew the age distribution. Overall I think the methodology of sampling was such that this must be a representative sample of the age distribution of the US. 

Is the sample balanced in terms of gender? If not, are there more females or males?

Answer: The sample does seem to be balanced in terms of gender except bins 6 and 7 are comprised of males only and bin 8 only females.Overall there are more males than females in the sample, and in terms of the split among age categories, men make up the majority of most of them.

```{r}
# Use this code to draw a stacked bar plot to view the relationship between sex and age. What can you conclude from this plot?

tab.agesex <- table(dat$irsex, dat$age2)
barplot(tab.agesex,
        main = "Stacked barchart",
        xlab = "Age category", ylab = "Frequency",
        legend.text = rownames(tab.agesex),
        beside = FALSE) # Stacked bars (default)
```

### Problem 4 
```{r}
## Substance use

#Make a boxplot

boxplot(dat$mjage , dat$cigage , dat$iralcage , names=c("Marijuana" , "Cigarettes" , "Alcohol"))
```

For which of the three substances included in the dataset (marijuana, alcohol, and cigarettes) do individuals tend to use the substance earlier?

Answer:Individuals tend to use alcohol the earliest. Based on the boxplot, it has the lowest median age as well as the lowest minimum value.

### Problem 5 
```{r}
## Sexual attraction

# What does the distribution of sexual attraction look like? Is this what you expected?

#Subset the data to remove legitimate skips  

newdata<-subset(dat$sexatract,subset = dat$sexatract<7 )

#Make a histogram of the new sexattract data set 

hist(newdata, xlab = "Sexual Attraction Rated on a Scale of 1-6", main = "Histogram of Sexual Attraction")

```

Answer: The distribution of sexual attraction is skewed to the right, with most of the respondents selecting "1" on the scale, which means that they are only attracted to the opposite sex. The second most frequent response was "2" which means they are mostly attracted to the opposite sex.The lowest number of the respondents said that they were not sure which was response "6." This is mostly expected because the majority of people in the US are heterosexual.

```{r}
#What is the distribution of sexual attraction by gender?

#Make a data frame with sexatract and irsex variables included

dat5<-data.frame(dat$sexatract, dat$irsex)

table(dat5$dat.irsex, dat5$dat.sexatract)


```

Answer:More males than females responded "1" however more females than males gave "2," "3," "4," and "6" as their answers.This suggests that women in this study were more likely to be mostly attracted to the same sex, equally attracted to both,mostly attracted to the same sex. Most men in the study are strictly heterosexual, while the women seem to see more variance.This answer is based on the table I made (non-graphical EDA)

### Problem 6 
```{r}
## English speaking

# What does the distribution of English speaking look like in the sample? Is this what you might expect for a random sample of the US population?

hist(dat$speakengl, main = "How Well Respondents Speak English", xlab = "English Proficiency on a Scale of 1-4 (1 being 'very well' 4 being 'not at all'", xlim = c(1,4))


```

Answer: A vast majority of the respondents report speaking English very well. While only a small proportion reported not speaking it well. No respondents reported not speaking English at all. This was definitely expected from a sample of the US population because, as English is the country's official language, most people here speak it.

```{r}
#Are there more English speaker females or males?

table(dat$speakengl,dat$irsex)


```

Answer:Almost equal numbers of men and women responded that they spoke English very well (response "1"), 84 and 77 respondents respectively.7 times more men than women reported speaking English well(response "2"), while only women and no men admitted that they did not speak English well (repsonse "3").Total, there are more English speaker males than females, but this makes sense given that there are more men in the sample.




# Exam 1

### Instructions

a. Create a folder in your computer (a good place would be under Crim 250, Exams). 

b. Download the dataset from the Canvas website (fatal-police-shootings-data.csv) onto that folder, and save your Exam 1.Rmd file in the same folder.

c. Download the README.md file. This is the codebook. 

d. Load the data into an R data frame.
```{r}
dat <- (read.csv(file="data/fatal-police-shootings-data-copy.csv"))
```


### Problem 1 (10 points)

a. Describe the dataset. This is the source: https://github.com/washingtonpost/data-police-shootings . Write two sentences (max.) about this.

This dataset contains data for all of the fatal shootings by police in the US that have occurred since the beginning of 2015. Within the dataset is information about the name of the victim, date of shooting, whether they were armed, their age, gender, race, whether they were mentally ill, whether they were threatening, whether they were fleeing,presence of a body camera, and where it occurred.  

b. How many observations are there in the data frame?
```{r}
dim(dat)
```

There are 6,594 different observations of 17 different variables. 

c. Look at the names of the variables in the data frame. Describe what "body_camera", "flee", and "armed" represent, according to the codebook. Again, only write one sentence (max) per variable.
```{r}
names(dat)
```

"body_camera":Body camera refers to news reports that indicate whether the officer was wearing a body camera that may have recorded all or a portion of the incident. 
"flee": Flee refers to whether the victim was moving away from the officer, as indicated by news reports. 
"armed": Armed refers to whether or not the victim was in possession of a weapon (or an item that a police officer would perceive as harmful) during the time of the shooting. 

d. What are three weapons that you are surprised to find in the "armed" variable? Make a table of the values in "armed" to see the options.
```{r}
table(dat$armed)
```

I am surprised to see beer bottle, binoculars, and air conditioner as weapons in the "armed" variable because it is difficult to conceive how these could be perceived as harmful, especially when the police officer himself has a gun. 

### Problem 2 (10 points)

a. Describe the age distribution of the sample. Is this what you would expect to see?
```{r}
hist(dat$age , xlab = "Age of Shooting Victim", main = "Distribution of Age")
```

The age of the shooting victims is most concentrated between the ages of 20 and 40. This is generally what I would expect to see because 20 year olds are the most likely age category to commit to crime any way. Also, it is unlikely that a police officer would see someone over 60 or under 15 years old as a threat, which is why these age ranges are the least frequent in the dataset. 

b. To understand the center of the age distribution, would you use a mean or a median, and why? Find the one you picked.
```{r}
summary(dat$age)
```

To understand the center of the age distribution, you would use median because the data is skewed to the right. When data is skewed, median is a better measure of central tendency because it gives outliers or infrequent numbers less weight. The median of the age variable is 35.00. 

c. Describe the gender distribution of the sample. Do you find this surprising?
```{r}
table(dat$gender)
```

The gender distribution is very heavily weighted toward toward males. They outnumber the females by almost 20 times. This is not surprising because males are more likely to be perceived as threatening and to be criminal offenders. 


### Problem 3 (10 points)

a. How many police officers had a body camera, according to news reports? What proportion is this of all the incidents in the data? Are you surprised that it is so high or low?

```{r}
table(dat$body_camera)
```
According to the news report, 910 police officers had a body camera. This is less than 14% of all of the incidents in the dataset. I am surprised that it is so low because I was under the impression that body cams were a required for all police officers to wear. 

b. In  how many of the incidents was the victim fleeing? What proportion is this of the total number of incidents in the data? Is this what you would expect?
```{r}
table(dat$flee)
```

The victim was fleeing in 1,912 of the incidents. This represents apporoximately 1/6 of all the incidents recorded in the dataset. This is a little less than what I would expect because it is logical that a criminal would flee from a police officer in the hopes of not getting caught. 



### Problem 4 (10 points) -  Answer only one of these (a or b).

a. Describe the relationship between the variables "body camera" and "flee" using a stacked barplot. What can you conclude from this relationship? 

*Hint 1: The categories along the x-axis are the options for "flee", each bar contains information about whether the police officer had a body camera (vertically), and the height along the y-axis shows the frequency of that category).*

*Hint 2: Also, if you are unsure about the syntax for barplot, run ?barplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.*


```{r}
#$library(ggplot2) 
#ggplot(dat, aes(fill= dat$body_camera, y= frequency, x= dat$flee)) + #geom_bar(position="stack", stat="identity") 
#just so you know what I was thinking for my code



```

__Your answer here.__

b. Describe the relationship between age and race by using a boxplot. What can you conclude from this relationship? 

*Hint 1: The categories along the x-axis are the race categories and the height along the y-axis is age.* 

*Hint 2: Also, if you are unsure about the syntax for boxplot, run ?boxplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.*


```{r}
table(dat$race)
class(dat$race)
dat$age

class(dat$age)

boxplot(dat$age~dat$race)
```

The relationship between age and race show that white offenders seem to be older, while Black offenders are typically in a lower age category. It also appears that offenders older than 40  are more likely to be white or of unknown race. You can conclude from this relationship that older age is more frequent in white offenders and younger age is mor frequent in black offenders, with hispanics, native americans, and others closer in age generally to black offenders. 






### Extra credit (10 points)

a. What does this code tell us?
Answer: This code organizes the incidents by date and tells us the time difference among the incidents.

```{r, eval=FALSE}
mydates <- as.Date(dat$date)
head(mydates)
(mydates[length(mydates)] - mydates[1])
```

b. On Friday, a new report was published that was described as follows by The Guardian: "More than half of US police killings are mislabelled or not reported, study finds." Without reading this article now (due to limited time), why do you think police killings might be mislabelled or underreported?
Answer: Police killings might be mislabelled or underreported because it makes the gvoernment and police officers look bad. The police killings are attrocities and often envoke rioting and protests. The governemnt may see that it is in their best interest if these incidents are underreported to tamp down on backlash and avoid accountability. 

c. Regarding missing values in problem 4, do you see any? If so, do you think that's all that's missing from the data?
Answer: There are some missing values in the variable age. I think it is likely that there is also more missing from the data.

# Assignment 3

### Problem 1
Load the data.
```{r}
library(readr)
library(knitr)
dat.crime <- read_delim("/Users/hannah/Documents/Crim 250/data/crime_simple.txt", delim = "\t")
```
This is a dataset from a textbook by Brian S. Everitt about crime in the US in 1960. The data originate from the Uniform Crime Report of the FBI and other government sources. The data for 47 states of the USA are given. 

Here is the codebook:

R: Crime rate: # of offenses reported to police per million population

Age: The number of males of age 14-24 per 1000 population

S: Indicator variable for Southern states (0 = No, 1 = Yes)

Ed: Mean of years of schooling x 10 for persons of age 25 or older

Ex0: 1960 per capita expenditure on police by state and local government

Ex1: 1959 per capita expenditure on police by state and local government

LF: Labor force participation rate per 1000 civilian urban males age 14-24

M: The number of males per 1000 females

N: State population size in hundred thousands

NW: The number of non-whites per 1000 population

U1: Unemployment rate of urban males per 1000 of age 14-24

U2: Unemployment rate of urban males per 1000 of age 35-39

W: Median value of transferable goods and assets or family income in tens of $

X: The number of families per 1000 earning below 1/2 the median income


We are interested in checking whether the reported crime rate (# of offenses reported to police per million population) and the average education (mean number of years of schooling for persons of age 25 or older) are related. 


1. How many observations are there in the dataset? To what does each observation correspond?

```{r}
dim(dat.crime)
```

__There are 47 observations in this data set that correspond to one of each of the 47 states included in the data set across the 14 variables measured.__

### Problem 2
2. Draw a scatter plot of the two variables. Calculate the correlation between the two variables. Can you come up with an explanation for this relationship?

```{r, fig.width=6, fig.height=4}
plot(dat.crime$Ed, dat.crime$R,  main="Relationship between Average Education and Reported Crime Rate",
    xlab="Average Education", ylab="Crime Rate")
```
```{r}
cor(dat.crime$Ed, dat.crime$R)
```
__The variables are loosely positively correlated, but the correlation is not that strong, as illustrated by the scatter plot and the correlation coefficient value of 0.3228349 that is not close to 1. One explanation for this relationship is that states with larger urban centers, especially in terms of high-level job opportunities, tend to have people with higher levels of education working those jobs. These same urban places also tend to be characterized by higher crime rates. It is possible that the positive correlation between the average education and crime rate is a product of the large cities themselves.__

### Problem 3
3. Regress reported crime rate (y) on average education (x) and call this linear model `crime.lm` and write the summary of the regression by using this code, which makes it look a little nicer `{r, eval=FALSE} kable(summary(crime.lm)$coef, digits = 2)`.

```{r} 
# Remember to remove eval=FALSE above!
dat.crime$Ed = scale(dat.crime$Ed, center=TRUE, scale=FALSE) # scaling the data
crime.lm <- lm(formula = R ~ Ed, data = dat.crime) # running regression
summary(crime.lm) # calling the summary of the fitted model
```
### Problem 4
4. Are the four assumptions of linear regression satisfied? To answer this, draw the relevant plots. (Write a maximum of one sentence per assumption.)

```{r}
plot(crime.lm, which=1)
```
Testing linearity assumption.

```{r}
plot(dat.crime$Ed, crime.lm$residuals, ylim=c(-15,15), main="Residuals vs. x", xlab="x, Average Education", ylab="Residuals")
abline(h = 0, lty="dashed")
``` 
Testing linearity and Independence assumption above. 

```{r}
plot(crime.lm, which=3)
```
Testing variance assumption/homoscedascisity above.
```{r}
plot(crime.lm, which=5)
```

```{r} 
plot(crime.lm, which=2)
```

Testing Normal Population Assumption above.

__Linearity Assumption:The data passes this assumption because the line in the Residuals vs. Fitted plot is mostly flat and the data distribution shows no pattern that would suggest a non-linear relationship. Independence Assumption:The data passes this assumption because the Residuals vs. X plot shows a pretty well spread out distribution with no noticeable, distinct pattern. Variance Assumption:The data passes this assumption because the line in the Scale-location plot is relatively straight, and there are about the same number of data points on either side of the line, which suggests the errors have constant variance. Normal Population Assumption: This assumption is not met because the data points in the top right of the normal Q-Q plot don't represent a normal distribution, and we know that these data points are not outliers based on their location within Cook's distance in the Residuals vs. leverage plot. __

### Problem 5
5. Is the relationship between reported crime and average education statistically significant? Report the estimated coefficient of the slope, the standard error, and the p-value. What does it mean for the relationship to be statistically significant?

__The relationship between reported crime and average education is statistically significant based on the following values. The estimated coefficient of the slope is 1.1161. The standard error is 0.4878. The p-value is 0.02688. When a relationship is statistically significant, it means that the two variables are likely related, meaning we can reject the null hypothesis.__

### Problem 6
6. How are reported crime and average education related? In other words, for every unit increase in average education, how does reported crime rate change (per million) per state?

__For every unit increase in average education, reported crime per million per state is predicted to increase by 1.1161 offenses. __

### Problem 7
7. Can you conclude that if individuals were to receive more education, then crime will be reported more often? Why or why not?

__You cannot conclude that if individuals were to receive more education, then crime will be reported more often because there is not evidence of a causal relationship here. Correlation does not equal causation. Just because the events are associated with one another does not mean that one causes the other. It is possible in this case that there is a third, unseen variable that causes both of these trends. Also, states are being measured here not individuals, so it would be difficult to make a prediction about individuals based on this model.__


